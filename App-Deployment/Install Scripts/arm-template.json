{  
    "$schema": https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#,  
    "contentVersion": "1.0.0.0",  
    "parameters": {  
        "automationAccountName": {  
            "type": "String",  
            "metadata": {  
                "description": "Automation account name"  
            }  
        },  
        "webhookName": {  
            "type": "String",  
            "metadata": {  
                "description": "Webhook Name"  
            }  
        },  
        "runbookName": {  
            "type": "String",  
            "metadata": {  
                "description": "Runbook Name for which webhook will be created"  
            }  
        },  
        "WebhookExpiryTime": {  
            "type": "String",  
            "metadata": {  
                "description": "Webhook Expiry time"  
            }  
        },  
        "_artifactsLocation": {  
            "defaultValue": https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-automation/,  
            "type": "String",  
            "metadata": {  
                "description": "URI to artifacts location"  
            }  
        }  
    },  
    "resources": [  
        {  
            "type": "Microsoft.Automation/automationAccounts",  
            "apiVersion": "2020-01-13-preview",  
            "name": "[parameters('automationAccountName')]",  
            "location": "[resourceGroup().location]",  
            "properties": {  
                "sku": {  
                    "name": "Free"  
                }  
            },  
            "resources": [  
                {  
                    "type": "runbooks",  
                    "apiVersion": "2018-06-30",  
                    "name": "[parameters('runbookName')]",  
                    "location": "[resourceGroup().location]",  
                    "dependsOn": [  
                        "[parameters('automationAccountName')]"  
                    ],  
                    "properties": {  
                        "runbookType": "Python2",  
                        "logProgress": "false",  
                        "logVerbose": "false",  
                        "description": "Sample Runbook",  
                        "publishContentLink": {  
                            "uri": "[uri(parameters('_artifactsLocation'), 'scripts/AzureAutomationTutorialPython2.py')]",  
                            "version": "1.0.0.0"  
                        }  
                    }  
                },  
                {  
                    "type": "webhooks",  
                    "apiVersion": "2018-06-30",  
                    "name": "[parameters('webhookName')]",  
                    "dependsOn": [  
                        "[parameters('automationAccountName')]",  
                        "[parameters('runbookName')]"  
                    ],  
                    "properties": {  
                        "isEnabled": true,  
                        "expiryTime": "[parameters('WebhookExpiryTime')]",  
                        "runbook": {  
                            "name": "[parameters('runbookName')]"  
                        }  
                    }  
                }  
            ]  
        }  
    ],  
    "outputs": {  
        "webhookUri": {  
            "type": "String",  
            "value": "[reference(parameters('webhookName')).uri]"  
        }  
    }  
}